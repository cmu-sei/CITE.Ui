<!--
Copyright 2022 Carnegie Mellon University. All Rights Reserved.
 Released under a MIT (SEI)-style license, please see LICENSE.md in the
project root for license information or contact permission@sei.cmu.edu for full terms.
-->

<div
  class="app-events-container background text"
>
  <app-topbar
    *ngIf="!hideTopbar"
    [title]="topbarText"
    [topbarView]="TopbarView.CITE_HOME"
    [topbarColor]="topbarColor"
    [topbarTextColor]="topbarTextColor"
    [imageFilePath]="topbarImage"
  ></app-topbar>

  <div
    *ngIf="apiIsSick"
    class="app-header-container background text"
    autosize
  >
    <h1>{{ apiMessage }}</h1>
    <h2>Please refresh this page.</h2>
    <h2>If the problem persists, please contact the site administrator.</h2>
  </div>

  <div
    *ngIf="!apiIsSick && expectingMyEvaluations && evaluationList && evaluationList.length === 0"
    class="app-header-container"
  >
    <h1>You are not a team member for an active evaluation.</h1>
    <h2>Please contact the site administrator or your event facilator.</h2>
  </div>

  <div
    *ngIf="!apiIsSick && isAuthorizedUser"
    style="height: inherit"
  >
    <div class="app-header-container">
      <app-evaluation-info
        [showAdminButton]="canAccessAdminSection$ | async"
        [showMoveArrows]="selectedSection === section.scoresheet"
        [teamList]="teamList"
        [myTeamId]="myTeamId$ | async"
        [submissionList]="submissionList | async"
        ></app-evaluation-info>
    </div>
      <div class="app-content-container"
        *ngIf="isReady"
      >
        <div class="app-model-container mat-elevation-z8" autosize *ngIf="selectedSection === section.dashboard">
          <app-dashboard
            *ngIf="unreadArticles$ && moveList$"
            [unreadArticles]="unreadArticles$ | async"
            [myTeamId]="myTeamId$ | async"
          ></app-dashboard>
        </div>
        <div class="app-model-container mat-elevation-z8" autosize *ngIf="selectedSection === section.scoresheet">
          <app-scoring-model></app-scoring-model>
        </div>
        <div class="app-score-container mat-elevation-z8" autosize>
          <app-score-card
            *ngIf="unreadArticles$ && moveList$"
            [selectedScoringModel]="selectedScoringModel | async"
            [submissionList]="submissionList | async"
          ></app-score-card>
        </div>
      </div>
  </div>
</div>
