<!--
Copyright 2022 Carnegie Mellon University. All Rights Reserved.
 Released under a MIT (SEI)-style license, please see LICENSE.md in the
project root for license information or contact permission@sei.cmu.edu for full terms.
-->

<div class="evaluation-info">
  <div class="evaluation-selector-div mat-elevation-z8 background text" *ngIf="evaluationList && evaluationList.length > 0">
    <mat-select placeholder="Select an active incident" [value]="selectedEvaluationId" (selectionChange)="selectEvaluation($event.value)">
      <mat-option *ngFor="let evaluation of activeEvaluations()" [value]="evaluation.id">
        {{ evaluation.description }}
      </mat-option>
    </mat-select>
  </div>
  <div class="move-div" *ngIf="selectedEvaluationId && activeSubmission">
    <h1 class="nowrap">Move:&nbsp;</h1>
    <button aria-label="Decrement Displayed Move" mat-icon-button [disabled]="activeSubmission.moveNumber <= getMinMoveNumber()" (click)="decrementDisplayedMove()">
      <mat-icon class="icon-color" svgIcon="ic_chevron_left"></mat-icon>
    </button>
    <h1 class="nowrap" [ngStyle]='getMoveStyle()'>{{ activeSubmission.moveNumber }}</h1>
    <button aria-label="Increment Displayed Move" mat-icon-button [disabled]="selectedEvaluationId && activeSubmission.moveNumber >= getCurrentMoveNumber()" (click)="incrementDisplayedMove()">
      <mat-icon class="icon-color" svgIcon="ic_chevron_right"></mat-icon>
    </button>
    <h1 class="space-right">&nbsp;of&nbsp;{{ getMaxMoveNumber() }}</h1>
    <h1 [ngStyle]='getMoveStyle()'>{{ getMoveDescription() }}</h1>
  </div>
  <div class="move-div" *ngIf="!selectedEvaluationId || !activeSubmission || activeSubmission.moveNumber < 0">
    &nbsp;
  </div>
  <div class="right-buttons" *ngIf="selectedTeam">
    <span class="center-self" *ngIf="selectedTeam.id !== myTeamId">Observing:&nbsp;&nbsp;</span>
    <mat-select class="center-self" placeholder="Team" [value]="selectedTeam.id" (selectionChange)="setActiveTeam($event.value)">
      <mat-option *ngFor="let team of teamList" [value]="team.id">
        {{ team.shortName }}
      </mat-option>
    </mat-select>
    <button
      mat-icon-button
      style="outline: none;"
      title="Dashboard"
      (click)="setSection('dashboard')"
      *ngIf="selectedSection === scoresheetSection"
    >
      <mat-icon class="mdi-24px" fontIcon="mdi-view-dashboard"></mat-icon>
    </button>
    <button
      mat-icon-button
      style="outline: none;"
      title="Scoresheet"
      (click)="setSection('scoresheet')"
      *ngIf="selectedSection !== scoresheetSection"
    >
      <mat-icon class="mdi-24px" fontIcon="mdi-grid"></mat-icon>
    </button>
    <button
      aria-label="Show Administration Page"
      mat-icon-button
      *ngIf="showAdminButton"
      [routerLink]="['/admin']"
      [queryParams]="{evaluation: selectedEvaluationId, move: getCurrentMoveNumber(), team: selectedTeam.id, section: 'Evaluations'}"
      style="outline: none;"
      title="Administration"
    >
      <mat-icon aria-hidden="false" class="mdi-24px" fontIcon="mdi-cog"></mat-icon>
    </button>
  </div>
</div>
